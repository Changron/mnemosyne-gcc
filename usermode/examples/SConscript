import os

Import('examplesEnv')
Import('pmallocLibrary')
Import('mtmLibrary')
Import('mcoreLibrary')

examplesEnv['CPPPATH'] = ['#library/mcore/include', '#library/mtm/include', '#library/pmalloc/include']
examplesEnv.Append(CCFLAGS = ' -fgnu-tm -fPIC ')
examplesEnv.Append(LIBS = [pmallocLibrary])
examplesEnv.Append(LIBS = [mtmLibrary])
examplesEnv.Append(LIBS = [mcoreLibrary])

if examplesEnv['BUILD_DEBUG'] == True:
	examplesEnv.Append(CCFLAGS = ' -g')
else:	
	examplesEnv.Append(CCFLAGS = ' -O2')

examplesEnv.Append(CCFLAGS = ' -march=native ')
examplesEnv.Append(LINKFLAGS = ' -T '+ examplesEnv['MY_LINKER_DIR'] + '/linker_script_persistent_segment_m64')
Export('examplesEnv')

example = examplesEnv['BUILD_EXAMPLE']
sconscript_path = example + '/SConscript'
SConscript(sconscript_path)

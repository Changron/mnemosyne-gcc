TARGETS = driver-hoard driver

all: $(TARGETS)

clean:
	rm -f $(TARGETS)

DEFS = -D_MT -D_REENTRANT
INCLUDES = -I../..

driver-hoard:
	@CXX@ @CXXFLAGS@ $(DEFS) $(INCLUDES) driver_mt.cpp ../../libhoard.a @LIBTHREAD@ @LIBSCHED@ -o driver-hoard

driver-ptmalloc:
	@CXX@ @CXXFLAGS@ $(DEFS) $(INCLUDES) ../../../allocators/ptmalloc/ptmalloc.o driver_mt.cpp @LIBTHREAD@ @LIBSCHED@ -o driver-ptmalloc

driver-mtmalloc:
	@CXX@ @CXXFLAGS@ $(DEFS) -DUSE_MTMALLOC=1 $(INCLUDES) driver_mt.cpp @LIBTHREAD@ @LIBSCHED@ -lmtmalloc -o driver-mtmalloc

driver:
	@CXX@ @CXXFLAGS@ $(DEFS) $(INCLUDES) driver_mt.cpp @LIBTHREAD@ @LIBSCHED@ -o driver

